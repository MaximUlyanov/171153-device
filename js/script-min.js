var letterLink=document.querySelector(".write-us-btn"),letterPopap=document.querySelector(".write-us"),exit=letterPopap.querySelector(".close"),overlay=document.querySelector(".modal-overlay"),form=letterPopap.querySelector(".write-us-form"),userName=form.querySelector(".form-name"),Mail=form.querySelector(".form-email"),Letter=form.querySelector(".form-letter"),storage=localStorage.getItem("userName"),storageMail=localStorage.getItem("Mail"),mapLink=document.querySelector(".map"),mappopap=document.querySelector(".modal-map"),mapClose=mappopap.querySelector(".close");letterLink.addEventListener("click",function(e){e.preventDefault(),overlay.classList.add("modal-overlay-on"),letterPopap.classList.add("popap"),storage?(userName.value=storage,Mail.focus()):userName.focus()}),exit.addEventListener("click",function(e){e.preventDefault(),letterPopap.classList.remove("popap"),overlay.classList.remove("modal-overlay-on"),letterPopap.classList.remove("modal-form-error")}),form.addEventListener("submit",function(e){userName.value&&Mail.value&&Letter.value?(localStorage.setItem("userName",userName.value),localStorage.setItem("Mail",Mail.value)):(e.preventDefault(),letterPopap.classList.remove("modal-form-error"),letterPopap.offsetWidth=letterPopap.offsetWidth,letterPopap.classList.add("modal-form-error"),userName.value||userName.classList.add("modal-form-invalid"),Mail.value||Mail.classList.add("modal-form-invalid"),Letter.value||Letter.classList.add("modal-form-invalid"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(letterPopap.classList.contains("popap")&&(letterPopap.classList.remove("popap"),letterPopap.classList.remove("modal-form-error")),overlay.classList.contains("modal-overlay-on")&&overlay.classList.remove("modal-overlay-on"))}),mapLink.addEventListener("click",function(e){e.preventDefault(),overlay.classList.add("modal-overlay-on"),mappopap.classList.add("popap")}),mapClose.addEventListener("click",function(e){e.preventDefault(),overlay.classList.remove("modal-overlay-on"),mappopap.classList.remove("popap")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(mappopap.classList.contains("popap")&&mappopap.classList.remove("popap"),overlay.classList.contains("modal-overlay-on")&&overlay.classList.remove("modal-overlay-on"))});